extends ../../../templates/priest
block prepend main
	#raised-section.main.main-raised
		section.form-box
			.container
				.row
					.col-md-12.form-wizard
						h1.font-weight-bold Appointments
						h4.font-weight-bold
				.row
					.table-responsive
						table.table.text-center
							thead
								tr
									th #
									th Event Type
									//- th Parishioner
									th Schedule
									//- th Venue
									th Actions
							tbody
								each detail in details
									tr.text-center
										td=detail.int_eventinfoID
										td=detail.var_eventname
										//- td=detail.varlast
										td=detail.date_approveddate
										//- td=detail.location
										td.td-actions
											button(type="button" data-toggle="modal" data-target="#exampleModal").btn.btn-primary.btn-sm
												| View
											| &nbsp;
											button.btn.btn-danger.btn-sm.deleteButton(type='button',rel='tooltip',value=`${detail.int_eventinfoID}`) Confirm
												
								
	#exampleModal.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
		.modal-dialog(role='document')
			.modal-content
				.modal-header
					h5#exampleModalLabel.modal-title Event Description
					button.close(type='button', data-dismiss='modal', aria-label='Close')
						span(aria-hidden='true') Ã—
				.modal-body
					label.h5 Name: &nbsp;
					label Juan Dela Cruz
					br
					label.h5 Venue: &nbsp;
					label 212 Molave St. Payatas B Quezon City
					br
					label.h5 Schedule: &nbsp;
					label September 10, 2018
				.modal-footer
					button.btn.btn-secondary(type='button', data-dismiss='modal') Close
block addjs
	script.
		$(document).ready(function() {
			$('.deleteButton').click(function(){
				var id= $(this).val()
				swal({
					title: 'Are you sure you want to cancel the event?',
					text: "You won't be able to revert this!",
					type: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, cancel it!'
				}).then((willCancel) => {
					if (willCancel) {
						$.post('/priest/queryConfirmAppointment',{id:id}).done(function(data){
							if(data.alertDesc==0)
							{
								swal(
									'Cancelled!',
									'Your transaction has been cancelled.',
									'success'
								).then(function(){
									location.reload()
								})

							}
							else
							{
								swal({
									title: 'Error!',
									text: '',
									icon: 'error'

								})
							}
							
							
						})
						
					}
				})
			})
		});

