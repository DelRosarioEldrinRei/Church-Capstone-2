extends ../../../../templates/secretariat
block prepend main
	style.
			.fa {
				font-size: 25px !important;
			}
			.fa-check::before {
				color: #28a745 !important;
			}
			.fa-times::before {
				color: red !important;
			}
			small {
				font-size: 90% !important;
			}
	main.bgc-grey-100
		#mainContent
			.row.masonry.pos-r
				.masonry-sizer.col-md-12
				.masonry-item.col-md-12
					.bgc-white.p-20.bd
						h6.c-grey-900 Regular Baptism
						.mT-30
							form
								.row
									.col-md-6
										.row
											.col-md-12
												.form-group.text-right
													h6.label-control Baptism Type
														.text-danger.d-inline  *
													.custom-control.custom-radio
														input#regularbap.custom-control-input(type='radio', name='baptismtype' value="Regular"  checked)
														label.custom-control-label(for='regularbap') 
															label Regular
													.custom-control.custom-radio
														input#specialbap.custom-control-input(type='radio', name='baptismtype' value="Special")
														label.custom-control-label(for='specialbap') 
															label Special
												h5.label-control Contact Details
												.form-group
													label Last Name
														.text-danger.d-inline *
													input.form-control#templastname(type='text' placeholder="Ex. Dela Cruz" name='lastname' required)
											.col-md-12
												.form-group
													label First Name
														.text-danger.d-inline *
													input.form-control#tempfirstname(type='text' placeholder="Ex. Juan" name='firstname' required)
											.col-md-12
												.form-group
													label Address
														.text-danger.d-inline *
													input.form-control#tempaddress(type='text' placeholder="Ex. Dela Cruz" name='lastname' required)
											.col-md-12
												.form-group
													label Contact Number
														.text-danger.d-inline *
													input.form-control#tempcontactnumber(type='text' placeholder="Ex. Dela Cruz" name='lastname' required)
											.col-md-12
												label Email Address
													.text-danger.d-inline *
												input.form-control#tempemailaddress(type='text' placeholder="Ex. Juan" name='firstname' required)
									//- .col-md-1
									//- 	.form-group.m-0.p-0
									//- 			h6.label-control Baptism Type
									//- 				.text-danger.d-inline  *
									//- 			.custom-control.custom-radio
									//- 				input#regularbap.custom-control-input(type='radio', name='baptismtype' value="Regular"  checked)
									//- 				label.custom-control-label(for='regularbap') 
									//- 					label Regular
									//- 			.custom-control.custom-radio
									//- 				input#specialbap.custom-control-input(type='radio', name='baptismtype' value="Special")
									//- 				label.custom-control-label(for='specialbap') 
									//- 					label Special
									.col-md-6
										.form-group
												label Schedule Date
													.text-danger.d-inline  *
												#special
														#calendarSpecial
												#regular
														#calendarRegular
								.row
									.col-md-3.px-lg-3.px-md-3.px-sm-0
										
									.col-md-4
										
									//- 			.text-danger.d-inline  *
									//- 		input.form-control.start-date(id='desireddate' name='desireddate' type='text', placeholder='Enter Desired Date', data-provide='datepicker')
									//- .col-md-4
									//- 	.form-group
									//- 		label  Schedule Time
									//- 		input.form-control(id='desiredtime' name='desireddate' type='text' placeholder='10:00 am').row
								.row
									.col-md-4
										.form-group
											label Name of the Child
												.text-danger.d-inline  *
											input.form-control(id='lname' name='lname' type='text' placeholder='Last Name *')
									.col-md-4
										.form-group
											label(style='visibility:hidden;') First Name
											input.form-control(id='fname' name='fname' type='text' placeholder='First Name *')
									.col-md-4
										.form-group
											label(style='visibility:hidden;') Middle Name
											input.form-control(id='mname' name='mname' type='text' placeholder='Middle Name')
								.row
									
									.col-md-3.px-lg-3.px-md-3.px-sm-0
											.form-group.m-0.p-0
												h6.label-control Gender
													.text-danger.d-inline  *
												.custom-control.custom-radio
													input#gendermale.custom-control-input(type='radio', name='gender' value="Male"  checked)
													label.custom-control-label(for='gendermale') 
														label Male
												.custom-control.custom-radio
													input#genderfemale.custom-control-input(type='radio', name='gender' value="Female")
													label.custom-control-label(for='genderfemale') 
														label Female
									.col-md-3
										.form-group
											label Birthday
												.text-danger.d-inline  *
											input.form-control.start-date(id='bday' name='bday' type='text', data-provide='datepicker' placeholder='Enter Your Birthday')
									.col-md-6
										.form-group
											label Birthplace
											.text-danger.d-inline  *
											input.form-control(id='bplace' name='bplace' type='text' placeholder='Ex. Payatas, Quezon City')
								.row
									.col-md-12
										.form-group
											label Address:
												.text-danger.d-inline  *
											input.form-control(id='address' name='address' type='textarea' placeholder='Ex. Urban, Bgy. Payatas B 1119 QC')
									
								.row
									.col-md-6
										.form-group
											label Father's Full Name:
												.text-danger.d-inline  *
											input.form-control(id='fathername' name='fathername' type='text' placeholder='Ex. 09324126754')
									.col-md-6
										.form-group
											label Father's Birthplace:
												.text-danger.d-inline  *
											input.form-control(id='fatherplace' name='fatherplace' type='text' placeholder='Ex. 09324126754')
								.row
									.col-md-6
										.form-group
											label Mother's Full Name:
												.text-danger.d-inline  *
											input.form-control(id='mothername' name='mothername' type='text' placeholder='Ex. 09324126754')
									.col-md-6
										.form-group
											label Mother's Birthplace:
												.text-danger.d-inline  *
											input.form-control(id='motherplace' name='motherplace' type='text' placeholder='Ex. 09324126754')
								.row
									
									.col-md-6
										.form-group
											label Contact Number
												.text-danger.d-inline  *
											input.form-control(id='contactnumber' name='contactnumber' type='text' placeholder='Ex. 09324126754')
									.col-md-6
										.form-group
											label Parents' Marriage Address:
												.text-danger.d-inline  *
											input.form-control(id='marriageaddress' name='marriageaddress' type='textarea' placeholder="Ex. 75 P. Domingo Street, Carmona. Makati City")
								h6.c-grey-900 Principal Sponsors
								.row
								
									.col-md-6
										//- .form-group
										//- label Principal Sponsors
										input.form-control(id='firstsponsor' name='sponsorname' type='text' placeholder="Ex. Enter Full Name *")
									.col-md-6
										//- .form-group
										//- label 
										input.form-control(id='secondsponsor' name='sponsorname' type='text' placeholder="Ex. Enter Full Name *")
									
								.row
									.col-md-6
										
										.form-group
											h6.c-grey-900 Number of Additional Sponsors
											input.form-control(id='numofaddsponsors' name='numofaddsponsors' type='number' placeholder="Enter number of additional sponsors")
								
								
								.row
									.col-md-6
										.form-group
											label File Details
												.text-danger.d-inline  *
											.form-check
												label.form-check-label
													input.form-check-input(id='nofile' name='file' type='radio' value='Male' checked='') 
													| No file submitted
											.form-check
												label.form-check-label
													input.form-check-input(id='withfile' name='file' type='radio' value='Male') 
													| File(s) submitted
									.col-md-6#withfiledrpdwn
										
										label File Location
										.row
											.col-md-6
												#cabinetdiv.form-group
												label
													| Cabinet
													select#cabinets.form-control(onchange='setcabinet(value);')
													
											.col-md-6
												.form-group
												label
													| Division
													select#divisions.form-control
								.row
									.col-md-3
										.form-group
											label Payment Details
											.form-group
												input.checkbox#paid(type="checkbox" )
												|  Paid
									.col-md-9#paymentdetails
										.form-group
											.row
												.col-md-2
													.form-group
														h6.label-control OR Number:
														input#ornumber.form-control(type='text', disabled='')
														.help-block.with-errors
												.col-md-3
													.form-group
														h6.label-control Date:
														input#paymentdate.form-control(type='text',disabled='')
														.help-block.with-errors
												.col-md-5
													.form-group
														h6.label-control Paid By:
														input#payer.form-control(type='text', placeholder='Name of the payer')
														.help-block.with-errors
												.col-md-2.px-lg-3.px-md-0.px-sm-0
													.form-group
														h6.label-control Amount:
														input#payment.form-control(type='number')
														.help-block.with-errors


									
								.text-center
									button.btn.btn-primary#submitApplication(type='button') Submit
							
							input#errChecker(type='text' hidden)
block addjs
	script.
		var eventDate='';
		var timeStart='';
		// Place where the blessing will happen logic
		$('#hospitalname').hide();
		$('#othervenue').hide();

		$('#place1').click(function() {
			$('#hospitalname').slideUp();
			$('#othervenue').slideUp();
		});
		$('#place2').click(function() {
			$('#hospitalname').slideDown();
			$('#othervenue').slideUp();
		});
		$('#place3').click(function() {
			$('#hospitalname').slideUp();
			$('#othervenue').slideDown();
		});
		$('#desiredtime').datetimepicker({
				format: 'LT',
				icons: {
					time: "fa fa-clock-o",
					date: "fa fa-calendar",
					up: "fa fa-chevron-up",
					down: "fa fa-chevron-down",
					previous: 'fa fa-chevron-left',
					next: 'fa fa-chevron-right',
					today: 'fa fa-screenshot',
					clear: 'fa fa-trash',
					close: 'fa fa-remove'
				}
		});

		
		$("#addPrincipalSponsor").click(function(event){
				var principal = "<div class='col-md-6 mb-4 pb-3'><div class='input-group'><input type='text' name='sponsorname' class='form-control'/><div class='input-group-prepend'><span class='btnDelete p-1 input-group-text rounded'><i class='fa fa-trash'></i></span></div></div></div>"
				$(principal).hide().appendTo("#principalSponsor").fadeIn(500);
		});

		$("#principalSponsor").on("click", ".btnDelete", function(event){
			$(this).parent().parent().parent().fadeOut(500, function(){
				$(this).remove();
			});
			event.stopPropagation();

		});
		$("#addAdditionalSponsor").click(function(event){
			
			var item2 = `
				<div class="col-md-6 px-lg-3 px-md-3 px-sm-0 mt-3">
					<div class="input-group m-0">
						<input class="form-control" class= 'sponsorclass' type="text" name="sponsorname" id="additionalsponsor" placeholder="Enter Full Name" required/>
						<div class="input-group-prepend"><span class="btnDelete p-1 input-group-text rounded"><i class="fa fa-trash"></i></span></div>
					</div>
				</div>`

			$(item2).hide().appendTo("#additionalSponsor").fadeIn(500);
			
			//- for(i=0;i<$('.sponsorclass').length;i++){

			//- }
		});

		$("#additionalSponsor").on("click", ".btnDelete", function(event){
			$(this).parent().parent().parent().fadeOut(500, function(){
				$(this).remove();
			});
			event.stopPropagation();
		});


		//Realtime Validation
		function validateForm(){
			$('form').formValidation({
				framework: 'bootstrap',
				icon: {
					valid: 'fa fa-check',
					invalid: 'fa fa-times',
					validating: 'fa fa-spinner'
				},
				fields: {
					scheduledate: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Desired Date`
								}
						}
					},
					lname: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Last Name`
								}
						}
					},
					fname: {
						validators: {
								notEmpty: {
										message: `Please Enter Your First Name`
								}
						}
					},
					relationship: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Relation With the Ill`
								}
						}
					},
					contact: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Contact Number`
								}
						}
					},
					fathername: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Father's Name`
								}
						}
					},
					fatherplace: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Father's Birthplace`
								}
						}
					},
					mothername: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Father's Birthplace`
								}
						}
					},
					motherplace: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Father's Birthplace`
								}
						}
					},
					contact: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Contact Number`
								}
						}
					},
					bday: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Birthday`
								}
						}
					},
					bplace: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Birthplace`
								}
						}
					},
					address: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Address`
								}
						}
					},
					marriageaddress: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Parent's Address`
								}
						}
					},
					birthcertificate: {
						validators: {
								notEmpty: {
										message: `Please Enter Your Birth Certificate`
								}
						}
					},
				},
			})
			.on('err.field.fv', function(e, data) {
				// Get the first invalid field
				var invalidFields = data.fv.getInvalidFields().length;
				$('#errChecker').val(invalidFields)
			})
			.on('success.field.fv', function(e, data) {
				// Get the first invalid field
				var invalidFields = data.fv.getInvalidFields().length;
				$('#errChecker').val(invalidFields)
			});
		}

		$(document).ready(function() {
			validateForm()

			$('#submitApplication').click(function(){
				console.log('SUBMIT BUTTON CLICKED')
				swal({
				title:'Are you sure?', 
				text:'This record will be considered as an approved request, and will then be added to the schedule of the priest. We will wait for the confirmation of the priest.',
				type:'warning',
				showCancelButton: false,
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33',
				confirmButtonText: 'Confirm'
				}).then((result)=>{
					if(result.value){
						if($('#withfile').prop("checked")){
							var boolfile=1
						}
						if($('#nofile').prop("checked")){
							var boolfile=0
						}
						if($('#paid').prop("checked")){
							var boolpaid=1
						}
						else{
							var boolpaid=0
						}
						if($('#nofile').prop("checked")){
							gender= $('#gendermale').val()
						}
						if($('#gendermale').prop("checked")){
							gender= $('#gendermale').val()
						}
						if($('#genderfemale').prop("checked")){
							gender= $('#genderfemale').val()
						}
						if($('#regularbap').prop("checked")){
							baptismtype= 'Baptism'
						}
						if($('#specialbap').prop("checked")){
							baptismtype= "Special Baptism"
						}
						if($('#place1').prop("checked")){
							venue= $('#address').val()
							var funeraltype='Funeral Service'
						}
						if($("#place2").prop("checked")){
							venue= 'Ina ng Lupang Pangako Parish'
							var funeraltype='Funeral Mass'
						}
						if($("#place3").prop("checked")){
							venue= $('#othervenue').val()
							var funeraltype='Funeral Service'
						}
						$.post('/secretariat/walkin-baptism', {
							desireddate:eventDate,
							desiredtime:timeStart,
							lastname: $('#lname').val(),
							firstname: $('#fname').val(),
							middlename: $('#mname').val(),
							birthday: $('#bday').val(),
							gender:gender,
							birthplace: $('#bplace').val(),
							address: $('#address').val(),
							fathername: $('#fathername').val(),
							fatherplace: $('#fatherplace').val(),
							mothername: $('#mothername').val(),
							motherplace: $('#motherplace').val(),
							marriageaddress: $('#marriageaddress').val(),
							contactnumber: $('#contactnumber').val(),
							cabinet: $('#cabinets').val(),
							division: $('#divisions').val(),
							boolfile: boolfile,
							funeraltype:funeraltype,
							boolpaid:boolpaid,
							ornumber:$('#ornumber').val(),
							paymentdate:$('#paymentdate').val(),
							payer:$('#payer').val(),
							payment:$('#payment').val(),
							baptismtype:baptismtype,
							numofaddsponsors:$('#numofaddsponsors').val(),
							firstsponsor:$('#firstsponsor').val(),
							secondsponsor:$('#secondsponsor').val(),
							templastname:$('#templastname').val(),
							tempfirstname:$('#tempfirstname').val(),
							tempaddress:$('#tempaddress').val(),
							tempemailaddress:$('#tempemailaddress').val(),
							tempcontactnumber:$('#tempcontactnumber').val(),
						}).done(data =>{
							swal({
							title:'Success',
							text:'Request added', 
							type:'success'
							}).then(function(){

								if(baptismtype=='Regular'){
										window.location=`/secretariat/transaction-regularbaptism`
								}
								else{window.location=`/secretariat/transaction-specialbaptism`}
							})
						
						})//done
					}
				})
			})
		});

		$('#withfiledrpdwn').hide();

		$('#nofile').click(function() {
			$('#withfiledrpdwn').slideUp();
			$('#cabinets').val();
			$('#divisions').val();
			$('#folderID').val();
		});
		$(document).on('click','#withfile',function(){
			$('#withfiledrpdwn').slideDown();
			$.post('/secretariat/getcabinets').done(data =>{
				$('#cabinets').append(`
						<option>No division selected</option>
					`)
				$('#divisions').append(`
						<option>No division selected</option>
					`)
				for(i=0;i<data.cabinets.length;i++){
					$('#cabinets').append(`
						<option value=${data.cabinets[i].int_cabinetID}>${data.cabinets[i].var_cabinetname}</option>
					`)
				}
			})
		});

		function setcabinet($i){
				console.log($i)
				$("#divisions").empty();
				$('#divisions').append(`
						<option>No division selected</option>
					`)
				$.post('/secretariat/transaction-marriage/getdivisions',{ cabinetID:$i}).done(data=>{
					console.log(data)
					for(i=0;i<data.divisions.length;i++){
					$('#divisions').append(`
						<option value='${$i}-${data.divisions[i].int_divisionID}'>${data.divisions[i].var_divisionname}</option>
					`)
					}//for		
				})//donedatacabinets
			}//function cabinets
		function setdivision($i){

			console.log($i)
				$("#folders").empty();

				$.post('/secretariat/transaction-marriage/getfolders',{ location:$i}).done(data=>{
					console.log(data)
					var newID= data.folders.max +1
					$('#folderID').val(`${newID}`)

					//- $('#folders').append(`
					//- 	<option value=${data.folders.max}>${data.folders.max}</option>
					//- `)
						
				})//donedatacabinets
		}//function cabinets
		$('#paymentdetails').hide();
		$(document).on('click','#paid',function(){
			if($(this).prop("checked") == true){
				$('#paymentdetails').slideDown();
				$.post('/secretariat/getOR').done(data =>{
					var ornumber = data.ornumber.max+1
					var nowDate = new Date(); 
					var date = nowDate.getFullYear()+'/'+(nowDate.getMonth()+1)+'-'+nowDate.getDate() +" "+ nowDate.getHours() +":" + nowDate.getMinutes() +":" +nowDate.getSeconds(); 
					console.log(data)
					var datelang = nowDate.getFullYear()+'-'+(nowDate.getMonth()+1)+'-'+nowDate.getDate()
					$('#ornumber').val(ornumber)
					$('#paymentdate').val(datelang)	
			})
			}

			if($(this).prop("checked") == false){
				$('#ornumber').val();
				$('#paymentdate').val();
				$('#payer').val();
				$('#payment').val();
				$('#paymentdetails').slideUp();
			}

			
		});
		$(document).ready(function(){
	
		$('#special').hide();
		//- $('#regular').hide();
		$("#specialbap").on('click',function(){
			
			console.log("SHIT")
			setTimeout(function(){
				$('#regular').fadeOut(400)
			}, 100)
			setTimeout(function(){
				$('#special').fadeIn(400)
			}, 400)
		})
		$("#regularbap").on('click',function(){
			setTimeout(function(){
				$('#special').fadeOut(400)
			}, 100)
			setTimeout(function(){
				$('#regular').fadeIn(400)
			}, 400)
			console.log("SHIT")
			//- $('#regular').fadeIn(1000)
			//- $('#special').fadeOut(1000)
		})
		//- else if($("#regularbap").prop("checked")){
		//- 	$('#regular').slideDown()
		//- }
		$.get('/secretariat/walkin-baptism/query1').done(data=>{
		console.log(data.utilities)
		console.log(data.utilities[0].int_agemax)
		//- console.log(baptismType1)
		var dateNow2 ='';
		var dateNow= new Date();

		dateNow2 = moment(dateNow,'YYYY-MM-DD hh:mm a').add(data.utilities[0].int_reservationmindays,'days').format('YYYY-MM-DD')
			console.log(dateNow2)
			console.log(data.utilities[0].int_reservationmindays)
			$('#calendarSpecial').fullCalendar({
			header: {
				left: 'title',
				center: 'agendaDay,month',
				right: 'prev,next today'
			},
			editable: false,
			firstDay: 0,
			selectable: true,
			defaultView: 'month',
			allDaySlot: false,
			selectHelper: true,
			minTime:'8:00:00',
			maxTime:'17:00:00',
			validRange: {
				start: dateNow2
			},
			businessHours: { dow: [1,2,3,4,5,6] },
			selectConstraint: "businessHours",
			select: function(date, jsEvent, view) {
				
				var view = $('#calendarSpecial').fullCalendar('getView');
				console.log(view.name)
				if(view.name == 'agendaDay'){
					eventDate = date.format('YYYY-MM-DD')
					timeStart = date.format('hh:mm a')
					timeEnd1 = date.add(1,'hour').format('YYYY-MM-DD hh:mm a')
					timeEnd2 = moment(timeEnd1).format('hh:mm a')
					console.log(eventDate)
					console.log(timeStart)
					console.log(timeEnd2)
					swal({
						title: 'You have selected this date, are you sure?',
						html: `Date: ${eventDate}  <br>` +
						`Time Start: ${timeStart} <br>` +
						`Time End: ${timeEnd2} <br>`,
						showCancelButton: true,
						confirmButtonColor: '#3085d6',
						cancelButtonColor: '#d33',
						confirmButtonClass: 'btn btn-success',
						cancelButtonClass: 'btn btn-danger',
						buttonsStyling: true,   
					}).then((value) => {
						if(value.value) {
							$("#calendarRegular").fullCalendar('removeEvents',[1])
							$("#calendarSpecial").fullCalendar('removeEvents',[1])
							swal(
								'Sucess!',
								'Event Date has been set.',
								'success'
							).then((value)=>{
							console.log('DESIRED TIME')
							$('#calendarSpecial').fullCalendar('renderEvent', {
								title: 'DESIRED TIME',
								start: `${moment(eventDate,'YYYY-MM-DD').format('MM/DD/YYYY')} ${timeStart}`,
								end: `${moment(eventDate,'YYYY-MM-DD').format('MM/DD/YYYY')} ${timeEnd2}`,
								allDay: false,
								id:1,
								overlap: false,
								droppable:true
							});
							return value
							console.log(eventDate)
							})
						} else if (
							value.dismiss === swal.DismissReason.cancel
						) {
							eventDate = '';
							timeStart = '';
							timeEnd2 = '';
						}
					})
				}
				else if(view.name == 'month'){
					$('#calendarSpecial').fullCalendar('changeView', 'agendaDay')
					$('#calendarSpecial').fullCalendar('gotoDate', date);
				}
				else{
					return  
				}
			},
			droppable: false,
		});
		
			var limit = data.utilities[0].int_maxcount
			console.log(limit)
			var calendar =  $('#calendarRegular').fullCalendar({
			header: {
				left: 'title',
				center: 'agendaDay,month',
				right: 'prev,next today'
			},
			editable: false,
			firstDay: 0,
			selectable: true,
			defaultView: 'month',
			allDaySlot: false,
			validRange: {
				start: dateNow2,
			},
			businessHours: { dow: [0] },
			selectConstraint: "businessHours",
			select: function(date, jsEvent, view) {
				eventDate = date.format('YYYY-MM-DD')
				$.post('/secretariat/walkin-baptism/query/regular/bilang',{eventdate:eventDate}).done(data=>{
					console.log(data[0].bilang >= limit)
					console.log(data[0].bilang  + "is greater than" + limit + "?")
					if(data[0].bilang >= limit){
						swal({
							title: 'Sorry but there are no slots available for this day',
							showCancelButton: true,
							confirmButtonColor: '#3085d6',
							cancelButtonColor: '#d33',
							confirmButtonClass: 'btn btn-success',
							cancelButtonClass: 'btn btn-danger',
							buttonsStyling: true,   
						})
					}
				})
				eventDate = date.format('YYYY-MM-DD')
				timeStart = data.utilities[0].time_availablestart
				timeEnd2 = data.utilities[0].time_availableend
				console.log(eventDate)
				swal({
						title: 'You have selected this date, are you sure?',
						html: `Date: ${eventDate}  <br>`,
						showCancelButton: true,
						confirmButtonColor: '#3085d6',
						cancelButtonColor: '#d33',
						confirmButtonClass: 'btn btn-success',
						cancelButtonClass: 'btn btn-danger',
						buttonsStyling: true,   
					}).then((value) => {
						if (value.value) {
							$('#nextButton1').addClass('btn-next')
							$("#calendarSpecial").fullCalendar('removeEvents',[1])
							$("#calendarRegular").fullCalendar('removeEvents',[1])
							swal(
								'Sucess!',
								'Event Date has been set.',
								'success'
							).then((value)=>{
							console.log('DESIRED TIME')
							$('#calendarRegular').fullCalendar('renderEvent', {
								title: '',
								start: `${moment(eventDate,'YYYY-MM-DD').format('MM/DD/YYYY')} ${timeStart}`,
								end: `${moment(eventDate,'YYYY-MM-DD').format('MM/DD/YYYY')} ${timeEnd2}`,
								allDay: false,
								id:1,
								overlap: false,
								droppable:true
							});
							return value
							})
						} else if (
							value.dismiss === swal.DismissReason.cancel
						) {
							eventDate = '';
							timeStart = '';
							timeEnd2 = '';
							console.log(eventDate)
							console.log(timeStart)
							console.log(timeEnd2)
						}
					})
			}
			});
			
			for(i=0;i<data.queries.length;i++){
			var dateEvent = moment(data.queries[i].date_eventdate).format('MM/DD/YYYY');
			var time_start = data.queries[i].time_eventstart = moment(data.queries[i].time_eventstart,'hh:mm:ss').format('hh:mm a');
			var time_end = moment(data.queries[i].time_eventstart,'hh:mm:ss').add(1,'hour').format('hh:mm a');
			//- console.log(time_end)
			//- console.log(dateEvent)
			//- console.log(data.queries[i].time_eventstart)
			//- console.log(data.queries[i].char_approvalstatus)
				$('#calendarSpecial').fullCalendar('renderEvent', {
				title: 'OCCUPIED',
				start: `${dateEvent} ${time_start}`,
				end: `${dateEvent} ${time_end}`,
				allDay: false,
				color:'#4c2508',
				textColor: "white",
				});
			}
			$.get('/secretariat/walkin-baptism/query/regular').done(data=>{
				
				for(i=0;i<data.length;i++){
					var dateEvent = moment(data.date_eventdate).format('MM/DD/YYYY');
					var time_start = data.time_eventstart = moment(data.time_eventstart,'hh:mm:ss').format('hh:mm a');
					var time_end = moment(data.time_eventstart,'hh:mm:ss').add(1,'hour').format('hh:mm a');
					console.log(data[i].date_eventdate)
					 $.post('/secretariat/walkin-baptism/query/regular/bilang',{eventdate:data[i].date_eventdate}).done(data=>{
						console.log(data[1])
						console.log(data[0].bilang)
					 	var dateEvent1 = moment(data[1]).format('MM/DD/YYYY')
						 if(data[0].bilang >= limit){
							 $('#calendarRegular').fullCalendar('renderEvent',{
								title: ' NO SLOTS AVAILABLE',
								start: `${dateEvent1}`,
								end: `${dateEvent1}`,
								allDay:true,
								color:'#4c2508',
								textColor: "white",
							 })
							 console.log("narender na pota")

						 }
						 else{

						 }
					 })
				}
			})
		})
		})

